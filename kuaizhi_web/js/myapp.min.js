;/*!myapp.js*/
function remove(e,t){for(var a=0;a<e.length;a++)e[a]&&e[a].id==t&&delete e[a];return e}function checklike(){var e=store.get("like_ids"),t=null;e?t=$.makeArray(JSON.parse(e)):e="",$("li.mycard").each(function(){var e=$(this).attr("data-id"),a=$(this).find(".likebtn");t&&t.indexOf(e)>-1?a.removeClass().addClass("mui-icon mui-icon-star-filled myicon mui-pull-left likebtn").removeClass("mui-spinner"):a.removeClass().addClass("mui-icon mui-icon-star-filled mui-pull-left likebtn").removeClass("mui-spinner")})}function checkstore(e,t,a){if(1==a){var n=store.get("like_ids"),i=JSON.parse(n);i=$.makeArray(i);for(var c,s,r=0;r<i.length;r++)i[r]==t&&(c=i.slice(0,r),s=i.slice(r+1));i=c.concat(s),0==i.length?(i=null,store.set("like_ids","")):store.set("like_ids",JSON.stringify(i));for(var c,s,l=null,o=JSON.parse(store.get("like_data")),r=0;r<o.length;r++)o[r]&&o[r].id==t&&(c=o.slice(0,r),s=o.slice(r+1));l=c.concat(s),0==l.length?(l=null,store.set("like_data","")):store.set("like_data",JSON.stringify(l))}else{var d=t;if(store.get("like_ids")){var o=JSON.parse(store.get("like_ids"));o=$.makeArray(o),o[o.length]=parseInt(d),store.set("like_ids",JSON.stringify(o))}else store.set("like_ids",d);for(var l=null,r=0;r<e.length;r++)e[r]&&e[r].id==t&&(l=$.makeArray(e[r]));var m=null;if(store.get("like_data")){var o=JSON.parse(store.get("like_data"));o=$.makeArray(o),o[o.length]=l[0],m=JSON.stringify(o)}else m=JSON.stringify(l);store.set("like_data",m)}}var EventEmitter={_events:{},dispatch:function(e,t){if(this._events[e])for(var a=0;a<this._events[e].length;a++)this._events[e][a](t)},subscribe:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},unSubscribe:function(e){this._events&&this._events[e]&&delete this._events[e]}};Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1};var pageNow=1,dateNow="",id=0,kzurl="http://api.kuaizhi.imgrids.com/api/index/",Topmenu=React.createClass({displayName:"Topmenu",getInitialState:function(){return{menus:[{title:"体育",id:20},{title:"时事",id:50}]}},componentDidMount:function(){var e=this;$.ajax({url:kzurl+"article_obj.html?callback=?",type:"get",dataType:"jsonp",success:function(t){e.isMounted()&&e.setState({menus:t})},error:function(){}})},handleClickBack:function(e){$(e.target).addClass("mymenu-active").siblings().removeClass("mymenu-active"),$("#mymenuheader").text($(e.target).text()),id=e.target.id,pageNow=1,EventEmitter.dispatch("changeItem",(new Date).getTime())},render:function(){var e=this.state.menus,t=this;return React.createElement("ul",{className:"mymenu"},React.createElement("li",{className:"mymenu-active",onClick:t.handleClickBack},"最新"),e.map(function(e){return React.createElement("li",{id:e.id,onClick:t.handleClickBack},e.title)}),React.createElement("li",{id:"520",onClick:t.handleClickBack},"剪报"))}}),Cardlist=React.createClass({displayName:"Cardlist",getInitialState:function(){return{cards:[{id:"1",title:"正在努力加载",obj:"1",content:"正在努力加载中",istop:"0",objname:"--",created:"2016-04-13 16:43:13"}]}},componentDidMount:function(){var e=this;EventEmitter.subscribe("changeItem",function(t){e.setState({curItem:t}),520==id?React.render(React.createElement(Likelist,null),document.getElementById("cardlists")):$.ajax({url:e.props.source,type:"get",data:{id:id,date:dateNow},dataType:"jsonp",success:function(t){e.isMounted()&&e.setState({cards:t})},error:function(){}})}),$.ajax({url:e.props.source,type:"get",data:{id:id,date:dateNow},dataType:"jsonp",success:function(t){e.isMounted()&&e.setState({cards:t})},error:function(){}})},componentDidUpdate:function(){checklike()},likedcallback:function(e){var t=this.state.cards;if($(e.target).hasClass("myicon")){$(e.target).removeClass("myicon");var a=$(e.target).parents(".mycard").attr("data-id");checkstore(t,a,1)}else{$(e.target).addClass("myicon");var n=$(e.target).parents(".mycard").attr("data-id");checkstore(t,n,0)}},removedcallback:function(e){var t=this,a=this.state.cards,n=$(e.target).parents(".mycard");n.animate({height:0,opacity:0},{duration:1e3,easing:"easeOutBounce",complete:function(){a=remove(a,n.attr("data-id")),t.setState({cards:a}),n.remove(),pageNow+=1,$.ajax({url:t.props.source,type:"get",data:{id:id,page:pageNow,date:dateNow},dataType:"jsonp",success:function(e){e.length>0&&(a[a.length]=e[0],t.isMounted()&&t.setState({cards:a}))},error:function(){}})}})},render:function(){var e=this.state.cards,t=this;return React.createElement("ul",null,e.map(function(e){return React.createElement("li",{"data-id":e.id,className:"mui-card mycard"},React.createElement("div",{className:"mui-collapse-content mui-text-right"},React.createElement("span",{className:"mui-spinner mui-pull-left likebtn",onClick:t.likedcallback}),React.createElement("span",{className:"mui-icon mui-icon-close",onClick:t.removedcallback})),React.createElement("div",{className:"mui-collapse-content mycard-text"},React.createElement("p",null,e.content)),React.createElement("div",{className:"mui-collapse-content mycard-date"},React.createElement("h5",null,React.createElement("span",{className:"mui-badge mui-badge-primary"},e.objname),"  ",React.createElement("span",null,e.created))))}))}}),Likelist=React.createClass({displayName:"Likelist",getInitialState:function(){return{cards:[{id:"1",title:"正在努力加载",obj:"1",content:"正在努力加载中",istop:"0",objname:"--",created:"2016-04-13 16:43:13"}]}},componentDidMount:function(){var e=this;EventEmitter.subscribe("changeItem",function(t){e.setState({curItem:t}),520==id||React.render(React.createElement(Cardlist,{source:"http://api.kuaizhi.imgrids.com/api/index/article_list.html?callback=?"}),document.getElementById("cardlists"))});var t=null;t=JSON.parse(store.get("like_data")&&store.get("like_data").length>0?store.get("like_data"):"[]"),e.isMounted()&&e.setState({cards:t})},componentDidUpdate:function(){},likedcallback:function(e){var t=this.state.cards;if($(e.target).hasClass("myicon")){$(e.target).removeClass("myicon");var a=$(e.target).parents(".mycard").attr("data-id");checkstore(t,a,1),this.removedcallback(e)}},removedcallback:function(e){var t=this,a=this.state.cards,n=$(e.target).parents(".mycard");n.animate({height:0,opacity:0},{duration:1e3,easing:"easeOutBounce",complete:function(){a=remove(a,n.attr("data-id")),t.setState({cards:a}),n.remove()}})},render:function(){var e=this.state.cards,t=this;return React.createElement("ul",null,e.map(function(e){return React.createElement("li",{"data-id":e.id,className:"mui-card mycard"},React.createElement("div",{className:"mui-collapse-content mui-text-right"},React.createElement("span",{className:"mui-icon mui-icon-star-filled myicon  likebtn",onClick:t.likedcallback})),React.createElement("div",{className:"mui-collapse-content mycard-text"},React.createElement("p",null,e.content)),React.createElement("div",{className:"mui-collapse-content mycard-date"},React.createElement("h5",null,React.createElement("span",{className:"mui-badge mui-badge-primary"},e.objname),"  ",React.createElement("span",null,e.created))))}))}}),Datemenu=React.createClass({displayName:"Datemenu",getInitialState:function(){return{menus:[{content:"2016-05-16 星期一"},{content:"农历四月初十"}]}},componentDidMount:function(){var e=this;$.ajax({url:kzurl+"date_list.html?callback=?",type:"get",data:{date:dateNow},dataType:"jsonp",success:function(t){if(t.length>0)e.isMounted()&&e.setState({menus:t});else{var a=new Date,n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();e.isMounted()&&e.setState({menus:[{content:n}]})}},error:function(){}})},handleClickBack:function(){var e=this,t=(new Date).getFullYear(),a='{"type":"date","beginYear":'+t+',"endYear":'+t+"}",n=JSON.parse(a),i=new mui.DtPicker(n);i.show(function(t){dateNow=t.text,i.dispose(),EventEmitter.dispatch("changeItem",dateNow),$.ajax({url:kzurl+"date_list.html?callback=?",type:"get",data:{date:dateNow},dataType:"jsonp",success:function(t){t.length>0?e.isMounted()&&e.setState({menus:t}):e.isMounted()&&e.setState({menus:[{content:dateNow}]})},error:function(){}})})},render:function(){var e=this.state.menus,t=this;return React.createElement("div",{className:"mui-slider"},React.createElement("div",{className:"mui-slider-group"},e.map(function(e){return React.createElement("div",{className:"mui-slider-item datenote",onClick:t.handleClickBack},"  ",e.content)})))}});React.render(React.createElement(Topmenu,{source:"http://api.kuaizhi.imgrids.com/api/index/article_list.html?callback=?"}),document.getElementById("mymenu")),React.render(React.createElement(Cardlist,{source:"http://api.kuaizhi.imgrids.com/api/index/article_list.html?callback=?"}),document.getElementById("cardlists")),React.render(React.createElement(Datemenu,null),document.getElementById("datenow"));